!function(t){function e(n){if(r[n])return r[n].exports;var s=r[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,e),s.l=!0,s.exports}var r={};e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=0)}([function(t,e,r){t.exports=r(1)},function(t,e,r){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),i=r(2),u=r(3),o=function(){function t(){var e=this;n(this,t),this.form=document.querySelector("form"),this.initInputs(["email","fio","phone"]),this.form.addEventListener("submit",function(t){t.preventDefault(),e.submit()}),this.result=this.form.querySelector("#resultContainer")}return s(t,[{key:"initInputs",value:function(t){var e=this;this.inputs={},t.forEach(function(t){e.inputs[t]=e.form.querySelector("input[name="+t+"]")})}},{key:"handleResponse",value:function(t){var e=this;switch(this.result.className="","progress"!==t.status&&this.form.querySelector("button").removeAttribute("disabled"),t instanceof Error&&(t.status="error",t.reason=t.message),t.status){case"success":this.result.classList.add("success"),this.result.innerText="Success";break;case"error":this.result.classList.add("error"),this.result.innerText=t.reason;break;case"progress":this.result.classList.add("progress"),setTimeout(function(){return e.submit()},parseInt(t.timeout))}}},{key:"submit",value:function(){var t=this;this.result.innerText="",Object.keys(this.inputs).map(function(e){return t.inputs[e].classList.remove("error")});var e=this.validate();e.isValid?(this.form.querySelector("button").setAttribute("disabled","true"),u.send(this.form.getAttribute("action"),new FormData(this.form)).then(function(e){return t.handleResponse(e)}).catch(function(e){return t.handleResponse(e)})):e.errorFields.forEach(function(e){t.inputs[e].classList.add("error")})}},{key:"getData",value:function(){var t=this,e={};return Object.keys(this.inputs).map(function(r){e[r]=t.inputs[r].value}),e}},{key:"setData",value:function(t){var e=this;Object.keys(t).map(function(r){void 0!==e.inputs[r]&&(e.inputs[r].value=t[r])})}},{key:"validate",value:function(){var t=this,e=[],r=function(t,r){var n=t.message;console.log(n),e.push(r)},n=function(t){return t.value=t.value.trim().replace(/\s+/g," "),t};return Object.keys(this.inputs).map(function(e){try{void 0!==i[e]&&i[e](n(t.inputs[e]).value)}catch(t){r(t,e)}}),{isValid:0===e.length,errorFields:e}}}]),t}();document.addEventListener("DOMContentLoaded",function(){return window.myForm=new o})},function(t,e,r){"use strict";var n={phone:function(t){if(!/^\+7\(\d{3}\)\d{3}-\d{2}-\d{2}$/.test(t))throw new Error("Формат телефона неверен");if(t.match(/\d/g).reduce(function(t,e){return+t+ +e},0)>30)throw new Error("Сумма чисел больше 30");return!0},fio:function(t){if(t=t.trim().replace(/\s+/g," "),3!==t.split(" ").length)throw new Error("ФИО должно состоять из трех слов");return!0},email:function(t){var e=["ya.ru","yandex.kz","yandex.ru","yandex.ua","yandex.by","yandex.com"];if(!/^[a-zA-Z0-9.!#$%&’*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(t))throw new Error("Формат email неверен");if(!e.includes(t.split("@")[1]))throw new Error("Запрещенный домен");return!0}};t.exports=n},function(t,e,r){"use strict";t.exports.send=function(t,e){return fetch(t,{method:"post",credentials:"include",body:e}).then(function(t){return t.json()})}}]);